<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		
	<meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width" />
		<link href="../../../css/bootstrap-3.3.4.css" rel="stylesheet">
		<link href="../../../css/google-fonts.css" rel="stylesheet">
		<link href="../../../css/font-awesome.css" rel="stylesheet">
		<link href="../../../css/isotope.css" rel="stylesheet">
		<link href="../../../css/style.css" rel="stylesheet">
		<link rel="stylesheet" href="../../../css/dataTables.bootstrap-1.10.13.css" />

		<script type="text/javascript" src="../../../js/jquery-3.0.0.js"></script>
		<script src="../../../js/jquery-ui.js"></script>
		<script type="text/javascript" src="../../../js/bootstrap-3.3.4.js"></script>
		<script language="JavaScript" src="../../../js/angular.min.js"></script>
		<script type="text/javascript" src="../../../js/jquery.dataTables-1.10.13.js"></script>
		<script type="text/javascript" src="../../../js/dataTables.bootstrap-1.10.13.js"></script>
	</head>

	<body class="navbar-top">
		<div class="modal-shiftfix">

			<!-- 菜单开始 -->
			<div class="navbar navbar-fixed-top scroll-hide">
				<div class="container-fluid top-bar">
					<div class="pull-right">
						<ul class="nav navbar-nav pull-right">
							<!-- <li class="dropdown notifications hidden-xs"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><span
                        aria-hidden="true" class="se7en-flag"></span>

                    <div class="sr-only">Notifications</div>
                </a></li>
                <li class="dropdown messages hidden-xs"><a class="dropdown-toggle" data-toggle="dropdown" href="#"><span
                        aria-hidden="true" class="se7en-envelope"></span>

                    <div class="sr-only">Messages</div>
                </a></li> -->
							<li class="dropdown user hidden-xs">
								<a data-toggle="dropdown" class="dropdown-toggle" href="#"> <img width="34" height="34" src="picture/2_avatar_middle.jpg">万和张三丰<b class="caret"></b></a>
								<ul class="dropdown-menu">
									<!--  <li><a href="manage/avatar.jsp"><i class="icon-user"></i> 我的头像</a></li> -->
									<li>
										<a href="LoginServlet?method=logout"><i class="icon-signout"></i>Logout</a>
									</li>
								</ul>
							</li>
						</ul>
					</div>
					<button class="navbar-toggle">
            <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
        </button>
					<a class="logo" href="#">weiboxs</a>
				</div>
				<div class="container-fluid main-nav clearfix">
					<div class="nav-collapse">
						<ul class="nav">

							<li class="">
								<a href="ControlServlet?method=countAll" class="">
									<span aria-hidden="true" class="se7en-home"></span>控制台
								</a>
							</li>
							<li class="">
								<a href="javascript:;" class="" data-toggle="dropdown" data-hover="dropdown">
									<span aria-hidden="true" class="se7en-star"></span> 客户管理<b class="caret"></b>
								</a>
								<ul class="dropdown-menu">
									<li>
										<a href="../customer/index.html" class="">客户</a>
									</li>
									<li>
										<a href="../linkman/linkMan.html" class="">联系人</a>
									</li>
									<li>
										<a href="../business/index.html" class="">商机</a>
									</li>
								</ul>
							</li>

							<li class="">
								<a href="javascript:;" class="" data-toggle="dropdown" data-hover="dropdown"> <span aria-hidden="true" class="se7en-flag"></span> 个人办公<b class="caret"></b>
								</a>
								<ul class="dropdown-menu">
									<li>
										<a href="#" class="">我的任务</a>
									</li>
									<li>
										<a href="#" class="">工作日志</a>
									</li>
									<li>
										<a href="#" class="">电子邮件</a>
									</li>
								</ul>
							</li>

							<li class="">
								<a href="javascript:;" class="" data-toggle="dropdown" data-hover="dropdown"> <span aria-hidden="true" class="se7en-forms"></span> 产品管理<b class="caret"></b>
								</a>
								<ul class="dropdown-menu">
									<li>
										<a href="#" class="">产品</a>
									</li>
									<li>
										<a href="#" class="">销售单</a>
									</li>
									<li>
										<a href="#" class="">采购单</a>
									</li>
									<li>
										<a href="#" class="">出入库</a>
									</li>
									<li>
										<a href="#" class="">库存明细</a>
									</li>
									<li>
										<a href="#" class="">产品类别</a>
									</li>
									<li>
										<a href="#" class="">仓库管理</a>
									</li>
								</ul>
							</li>

							<li class="current">
								<a href="javascript:;" class="current" data-toggle="dropdown" data-hover="dropdown">
									<span aria-hidden="true" class="se7en-gear"></span> 系统设置<b class="caret"></b>
								</a>
								<ul class="dropdown-menu">
									<li>
							             <a href="../../systemSettings/manage/index.html" class="">员工管理</a>
									</li>
									<li>
										<a href="../../systemSettings/job/index.html" class="">职位管理</a>
									</li>
									<li>
										<a href="../../systemSettings/menu/index.html" class="">菜单管理</a>
									</li>
								</ul>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<!--菜单结束-->

			<input type="hidden" id="inputId" value="1" />
			<div class="container-fluid main-content">
				<div class="widget-container fluid-height clearfix">
					
					<div class="heading clearfix">
						<i class="icon-table"></i> 商机管理
						<a id="add-row" class="btn btn-sm btn-primary-outline pull-right" href="addChance.html"><i class="icon-plus"></i> 新增商机
						</a>
					</div>
					<div class="widget-content padded clearfix">
						<div class="dataTables_filter">
							<form class="form-inline search-form" id="actionFormSo" action="CustomerServlet?method=getAllZd" method="post">
								<div class="btn-group">
									<select id="field" class="form-control" onchange="changeCondition()" name="field">
										<option class="" value="">--请选择筛选条件--</option>
										<option class="text" value="customer_name" rel="1" url="/fields/boxfield.html">商机名</option>
										<option class="box" value="customer_industry" rel="1" url="/fields/boxfield.html">商机类型</option>
										<option class="box" value="customer_origin" rel="1" url="/fields/boxfield.html">状态</option>
										<!-- 									<option class="owner" value="owner_id" -->
										<!-- 										url="/manage/ajax-user.html">负责人</option> -->
										<option class="date" value="created_at">商机来源</option>
										<option class="date" value="updated_at">预计价格</option>
										<option class="date" value="updated_at">下次联系时间</option>
										<option class="date" value="updated_at">修改时间</option>
									</select>

									<div class="form-group" id="conditionContent" style="display: none">
										<input type="text" id="hiddenId" class="form-control" />
									</div>
									<div class="form-group" id="conditionContentRq" style="display: none">
										<input type="date" id="hiddenIdRq" class="form-control" />
									</div>
									<div class="form-group" id="searchContent" style="display: none">
										<select id="selectId" class="form-control">
										</select>
									</div>

								</div>
								<div class="btn-group">
									<button type="button" class="btn btn-success" onclick="soo()">搜索</button>
								</div>
							</form>
						</div>

						<div id="w0" class="grid-view">
							<div class="table-responsive">
								<table class="table table-hover">
									<thead>
										<tr>
											<th><label class="label-checkbox"> <input
												type="checkbox" class="select-on-check-all"
												name="selection_all" value="1"><span
												class="custom-checkbox"></span> </label>
											</th>
											<th nowrap>创建人</th>
											<th nowrap>联系人</th>
											<th nowrap>所属客户</th>
											<th nowrap>商机名</th>
											<th nowrap>商机类型</th>
											<th nowrap>商机来源</th>
											<th nowrap>预计价格</th>
											<th nowrap>下次联系时间</th>
											<th nowrap>下次联系内容</th>
											<th nowrap>更新时间</th>
											<th class="action-column">操作</th>
										</tr>
									</thead>
									<tbody>
										<tr data-key="13">
											<td><label class="label-checkbox"> <input
													type="checkbox" name="selection[]" value="13"><span
													class="custom-checkbox"></span> </label>
											</td>
											<td>黄秋</td>
											<td>小明</td>
											<td>小王</td>
											<td>新业务</td>
											<td>信息服务</td>
											<td>互联网</td>
											<td>1000万</td>
											<td>2018-7-27</td>
											<td>当面讲</td>
											<td>2018-7-27</td>
											

											<td>
												<div>
													<button type="button" name="updatebtn"
														class="btn btn-success btn-sm"
														id="1_ct "
														onclick="checkCustomer(this.id)">查看</button>
													<button type="button"  name="updatebtn" class="btn btn-warning btn-sm" id="1_xg" onclick="updateCustomer(this.id)">修改</button>
												</div>
											</td>
										</tr>
										<tr data-key="13">
											<td><label class="label-checkbox"> <input
													type="checkbox" name="selection[]" value="13"><span
													class="custom-checkbox"></span> </label>
											</td>
											<td>黄秋</td>
											<td>小明</td>
											<td>小王</td>
											<td>新业务</td>
											<td>信息服务</td>
											<td>互联网</td>
											<td>1000万</td>
											<td>2018-7-27</td>
											<td>当面讲</td>
											<td>2018-7-27</td>

											<td>
												<div>
													<!--onclick="updateCustomer(this.id)"-->
													<button type="button"name="updatebtn"
														class="btn btn-success btn-sm"
														id="1_ct "
														onclick="checkCustomer(this.id) ">查看</button>
														<button type="button "  name="updatebtn" class="btn btn-danger btn-sm" id="1_xg" onclick="addTuiJin(this.id)" >添加推进</button>
													<button type="button "  name="updatebtn" class="btn btn-warning btn-sm" id="1_xg" onclick="updateCustomer(this.id)">修改</button>
												</div>
											</td>
										</tr>
										<tr data-key="13">
											<td><label class="label-checkbox"> <input
													type="checkbox" name="selection[]" value="13"><span
													class="custom-checkbox"></span> </label>
											</td>
											<td>黄秋</td>
											<td>小明</td>
											<td>小王</td>
											<td>新业务</td>
											<td>信息服务</td>
											<td>互联网</td>
											<td>1000万</td>
											<td>2018-7-27</td>
											<td>当面讲</td>
											<td>2018-7-27</td>

											<td>
												<div>
													<button type="button" name="updatebtn "
														class="btn btn-success btn-sm "
														id="1_ct "
														onclick="checkCustomer(this.id)">查看</button>
													<button type="button "  name="updatebtn" class="btn btn-warning btn-sm" id="1_xg" onclick="updateCustomer(this.id)">修改</button>
												</div>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
					
				
				</div>	
			</div>
		</div>
		<script type="text/javascript">
			function checkCustomer(id) {
				var customerId = id.split("_ct")[0];
				location.href = 'detail.html';
			}
			
			function addTuiJin(id) {
				var customerId = id.split("_xg")[0];
				location.href = 'creatWorks.html';
			}

			function updateCustomer(id) {
				var customerId = id.split("_xg")[0];
				location.href = 'change.html';
			}

			function changeCondition() {
				var selectTest = $("#field").find("option:selected").text();
				if(selectTest == "商机名") {
					$("#conditionContent").show();
					$("#searchContent").hide();
					$("#selectId").empty();
					$("#hiddenId").attr("type", "text");
					$("#hiddenId").val("");
					$("#conditionContentRq").hide();
				} else if(selectTest == "下次联系时间" || selectTest == "修改时间") {
					$("#conditionContent").show(); //conditionContentRq
					$("#conditionContentRq").show();
					$("#searchContent").hide();
					$("#selectId").empty();
					$("#hiddenId").val("");
					$("#hiddenId").attr("type", "date");
				} else if(selectTest == "状态") {
					$("#searchContent").show();
					$("#conditionContent").hide();
					$("#conditionContentRq").hide();
					$("#selectId").empty();
					$("#hiddenId").attr("type", "text");
					$("#selectId").append(
						"<option value='0001' selected>已签订</option>");
					$("#selectId").append("<option value='0002'>大型企业</option>");
					$("#selectId").append("<option value='0003'>设计院/研究所</option>");
					$("#selectId").append("<option value='0004'>政府/学校/社团</option>");
					$("#selectId").append("<option value='0005'>成长性企业</option>");
					$("#selectId").append("<option value='0006'>其他</option>");
				} else if(selectTest == "商机来源") {
					$("#searchContent").show();
					$("#conditionContent").hide();
					$("#conditionContentRq").hide();
					$("#selectId").empty();
					$("#hiddenId").attr("type", "text");
					$("#selectId").append("<option value='1001'>网络营销</option>");
					$("#selectId").append("<option value='1002'>公开媒体</option>");
					$("#selectId").append(
						"<option value='1003' selected>合作伙伴</option>");
					$("#selectId").append(
						"<option value='1004' selected>广告</option>");
					$("#selectId").append("<option value='1005'>广告</option>");
					$("#selectId").append("<option value='1006'>推销电话</option>");
					$("#selectId").append("<option value='1007'>朋友推荐</option>");
					$("#selectId").append("<option value='1008'>同事介绍</option>");
					$("#selectId").append("<option value='1009'>其他</option>");
					
				 }else if(selectTest == "商机类型") {
					$("#searchContent").show();
					$("#conditionContent").hide();
					$("#conditionContentRq").hide();
					$("#selectId").empty();
					$("#hiddenId").attr("type", "text");
					$("#selectId").append("<option value='1001'>网络营销</option>");
					$("#selectId").append("<option value='1002'>公开媒体</option>");
					$("#selectId").append(
						"<option value='1003' selected>合作伙伴</option>");
					$("#selectId").append(
						"<option value='1004' selected>广告</option>");
					$("#selectId").append("<option value='1005'>广告</option>");
					$("#selectId").append("<option value='1006'>推销电话</option>");
					$("#selectId").append("<option value='1007'>朋友推荐</option>");
					$("#selectId").append("<option value='1008'>同事介绍</option>");
					$("#selectId").append("<option value='1009'>其他</option>");
					
					
				}
			}

			function soo() { //查询
				var selectTest = $("#field").find("option:selected").text();
				if($("#searchContent").css('display') == "inline-block") {
					var text = $("#selectId").find("option:selected").val();
					if(selectTest == "所属行业") {
						$("#actionFormSo").attr(
							"action",
							"index.html?method=getSomeCustomer&text=" +
							text + "&type=2 ");
						$("#actionFormSo").submit();
					} else if(selectTest == "客户来源") {
						$("#actionFormSo").attr(
							"action",
							"CustomerServlet?method=getSomeCustomer&text=" +
							text + "&type=3 ");
						$("#actionFormSo").submit();
					} else if(selectTest == "负责人") {
						$("#actionFormSo").attr(
							"action",
							"CustomerServlet?method=getSomeCustomer&text=" +
							text + "&type=4");
						$("#actionFormSo").submit();
					}
				} else if($("#conditionContent").css('display') == "inline-block") {
					var text = $("#hiddenId").val();
					var textTime = $("#hiddenIdRq").val();
					if(text != null && text != "undefined" && text != "") {
						if(selectTest == "客户名称") {
							$("#actionFormSo").attr(
								"action",
								"CustomerServlet?method=getSomeCustomer&text=" + encodeURI(encodeURI(text)) + "&type=1 ");
							$("#actionFormSo").submit();
						} else if(selectTest == "创建时间") {
							if(text > textTime) {
								alert("前面输入时间不能大于后面输入时间");
								return;
							}
							$("#actionFormSo").attr(
								"action",
								"CustomerServlet?method=getSomeCustomer&text=" +
								text + "&type=5" + "&texTime=" + textTime);
							$("#actionFormSo").submit();
						} else if(selectTest == "修改时间") {
							if(text > textTime) {
								alert("前面输入时间不能大于后面输入时间");
								return;
							}
							$("#actionFormSo").attr(
								"action",
								"CustomerServlet?method=getSomeCustomer&text=" +
								text + "&type=6" + "&texTime=" + textTime);
							$("#actionFormSo").submit();
						}

					}

				}
			}
		</script>
	</body>
</html>
